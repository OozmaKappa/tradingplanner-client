<div class="p-6">
    <div style="float: right;">
        <button class="hidden sm:inline-flex" mat-flat-button (click)="openNewTradeDialog()" [color]="'primary'">
            <mat-icon class="icon-size-5">add</mat-icon>
            <span class="ml-2">New</span>
        </button>
    </div>
    <div class="mr-4 text-lg font-medium tracking-tight leading-6 truncate">Recent trades</div>
    <div class="text-secondary font-medium">1 pending, 4 completed</div>
</div>
<div class="overflow-x-auto mx-6">
    <table mat-table class="w-full bg-transparent" matSort [dataSource]="tradesDataSource" [trackBy]="trackByFn"
        #recentTransactionsTable>
        <!-- Ticker -->
        <ng-container matColumnDef="ticker">
            <th mat-header-cell mat-sort-header *matHeaderCellDef>
                Ticker
            </th>
            <td mat-cell *matCellDef="let trade">
                <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                    {{trade.ticker}}
                </span>
            </td>
        </ng-container>

        <!-- Updated At -->
        <ng-container matColumnDef="updatedAt">
            <th mat-header-cell mat-sort-header *matHeaderCellDef>
                Updated At
            </th>
            <td mat-cell *matCellDef="let trade">
                <span class="pr-6 whitespace-nowrap">
                    {{trade.updatedAt | date:'MMM dd, y'}}
                </span>
            </td>
        </ng-container>

        <!-- Side -->
        <ng-container matColumnDef="side">
            <th mat-header-cell mat-sort-header *matHeaderCellDef>
                Side
            </th>
            <td mat-cell *matCellDef="let trade">
                <span class="pr-6 whitespace-nowrap">
                    {{trade.side}}
                </span>
                <span class="pr-6 whitespace-nowrap" *ngFor="let closingTrade of trade.closedBy">
                    <br />
                    {{closingTrade.side}}
                </span>
            </td>
        </ng-container>

        <!-- Price -->
        <ng-container matColumnDef="price">
            <th mat-header-cell mat-sort-header *matHeaderCellDef>
                Price
            </th>
            <td mat-cell *matCellDef="let trade">
                <span class="pr-6 whitespace-nowrap">
                    {{trade.price | currency:'USD'}}
                </span>
                <span class="pr-6 whitespace-nowrap" *ngFor="let closingTrade of trade.closedBy">
                    <br />
                    {{closingTrade.price | currency:'USD'}}
                </span>
            </td>
        </ng-container>

        <!-- Amount -->
        <ng-container matColumnDef="amount">
            <th mat-header-cell mat-sort-header *matHeaderCellDef>
                Amount
            </th>
            <td mat-cell *matCellDef="let trade">
                <span class="pr-6 font-medium whitespace-nowrap">
                    {{trade.amount}}
                </span>
            </td>
        </ng-container>

        <!-- P&L -->
        <ng-container matColumnDef="pnl">
            <th mat-header-cell mat-sort-header *matHeaderCellDef>
                P&L
            </th>
            <td mat-cell *matCellDef="let trade">
                <span class="pr-6 font-medium whitespace-nowrap"
                    [ngClass]="{'text-green-600': trade.pnl > 0, 'text-red-600': trade.pnl < 0 }">
                    {{trade.pnl | number: '1.2-2'}}
                </span>
            </td>
        </ng-container>

        <!-- Status -->
        <ng-container matColumnDef="status">
            <th mat-header-cell mat-sort-header *matHeaderCellDef>
                Status
            </th>
            <td mat-cell *matCellDef="let trade">
                <span
                    class="inline-flex items-center font-bold text-xs px-2.5 py-0.5 rounded-full tracking-wide uppercase"
                    [ngClass]="{'bg-red-200 text-red-800 dark:bg-red-600 dark:text-red-50': trade.status === 'pending',
                                'bg-green-200 text-green-800 dark:bg-green-600 dark:text-green-50': trade.status === 'completed'}">
                    <span class="leading-relaxed whitespace-nowrap">{{trade.status}}</span>
                </span>
            </td>
        </ng-container>

        <!-- Footer -->
        <ng-container matColumnDef="recentOrdersTableFooter">
            <td class="py-6 px-0 border-0" mat-footer-cell *matFooterCellDef colspan="6">
                <button mat-stroked-button>See all trades</button>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="tradesTableColumns"></tr>
        <tr class="order-row h-16" mat-row *matRowDef="let row; columns: tradesTableColumns;"></tr>
        <tr class="h-16 border-0" mat-footer-row *matFooterRowDef="['recentOrdersTableFooter']"></tr>
    </table>
</div>